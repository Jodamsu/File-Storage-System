<!DOCTYPE html>
<html lang="en">

<head>
    
    <!-- Meta Declaration -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="Myles Wardell" content="">
    
    <!-- Page Title -->
    <title> My Files </title>

    <!-- StyleSheet Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
    body {
        padding-top: 70px;
    }
    
    /* Drag and Drop Style */
    .dropzone {
    margin: auto;
    height: 300px;
    width: 40%;
    
    border: 2px dashed #ccc;
    color: #ccc;
    line-height: 300px;
    text-align: center;
    
    }

    .dropzone.dragover {
        border-color: #000;
        color: #000;
    }
        
    .dropzone.hover {
        border-color: #e6e6e6;
        color: #e6e6e6;
    }
    </style>

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            
            <!-- Navigation Bar -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="myfiles.html">My File Host</a>
            </div>
            
            <!-- Links to Other Pages -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="myfiles.html">My Files</a></li>
                    <li class="active"> <a href="upload.html">Upload</a> </li>
                    <li> <a href="about.html">About Us</a> </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Page Contents -->
    <div class="container">
        <h2>Upload Files</h2>   
    </div>
    
    <!-- Uplaod Block -->
    <div id="uploads"></div>
    <div class="dropzone" id="dropzone">Drop Files Here To Upload</div>
    
    <!-- Scripts -->
    <script>
        //Drop Upload JavaScript
        (function() {
            var dropzone = document.getElementById("dropzone");
            
            var displayUploads = function(data) {
                var uploads = document.getElementById("uploads"),
                    anchor,
                    x;
                
                for (x = 0; x < data.length; x = x + 1) {
                    anchor = document.createElement("a");
                    anchor.href = data[x].file;
                    anchor.innerText = data[x].name;
                    
                    uploads.appendChild(anchor);
                }
            }
            
            //Upload.php parse
            var upload = function(files) {
                var formData = new FormData(),
                    xhr = new XMLHttpRequest(),
                    x;

                for (x = 0; x < files.length; x++) {
                    formData.append("file[]", files[x]);
                }

                xhr.onload = function() {
                    var data = JSON.parse(this.responseText);
                    displayUploads(data)
                }

                xhr.open("post", "upload.php");
                xhr.send(formData);
            }
            
            //As User Releases Files
            dropzone.ondrop = function(e) {
                e.preventDefault();
                this.className = "dropzone";
                upload(e.dataTransfer.files);
            }
            
            //As User Hovers Over
            dropzone.ondragover = function() {
                this.className = "dropzone dragover";
                return false;
            }
            

            dropzone.ondragleave = function() {
            this.className = "dropzone";       
            return false;   
            }
            
            dropzone.hover = function() {
                this.className = "dropzone hover"
                return false;
            }
            
            dropzone.onclick = function() {
                e.preventDefault();
                this.className = "dropzone";
                upload(e.dataTransfer.files);
            }
        }());
        
    </script>
    
    <!-- JavaScripts Imports -->
    
    <!-- jQuery Version 1.11.1 -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
